<!-- Copyright (c) Abstract Machines
SPDX-License-Identifier: Apache-2.0 -->

{{ define "dashboards" }}
    <!doctype html>
    <html lang="en">
        <head>
            {{ template "header" }}
            <link rel="stylesheet" href="/css/dashboards.css" />
            <title>统计面板</title>
        </head>
        <body>
            {{ template "navbar" . }}
            <div class="main-content pt-3">
                <div class="container-fluid">
                    <div class="row-mb-3 p-3">
                        <div class="col-lg-12 mx-auto">
                            {{ template "breadcrumb" . }}
                            <div id="dashboard-alert"></div>
                            <div class="row-mb-3 mb-3">
                                <button class="btn body-button" type="button" onclick="newDashboard()">新增统计面板</button>
                            </div>
                            <div class="row" id="dashboard-cards-container"></div>
                            <div id="dashboard-loader" class="row justify-content-center">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">加载中...</span>
                                </div>
                            </div>
                            <div class="card-actions">
                                <span>
                                    显示
                                    <span id="cards-count"></span>
                                    个，共
                                    <span id="cards-total"></span>
                                    个
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Create Dashboard modal -->
            <div 
                class="modal fade" 
                id="createDashboardModal" 
                tabindex="-1" 
                role="dialog" 
                aria-labelledby="createDashboardModalLabel" 
                aria-hidden="true"
                data-bs-backdrop="static" 
                data-bs-keyboard="false"  
            >
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="createDashboardModalLabel">新增统计面板</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form id="create-dashboard-form" method="post">
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label for="dashboard-name" class="form-label">名称</label>
                                    <input type="text" class="form-control" name="name" id="dashboard-name" placeholder="Enter the dashboard name" required />
                                </div>
                                <div class="mb-3">
                                    <label for="dashboard-description" class="form-label">描述</label>
                                    <textarea class="form-control" name="description" id="dashboard-description" placeholder="Enter the dashboard description"></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn body-button" data-bs-dismiss="modal">确定</button>
                                <button type="button" class="btn body-button" data-bs-dismiss="modal">取消</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- update dashboard modal -->
            <div 
                class="modal fade" 
                id="updateDashboardModal" 
                tabindex="-1" 
                role="dialog" 
                aria-labelledby="updateDashboardModalLabel" 
                aria-hidden="true"
                data-bs-backdrop="static" 
                data-bs-keyboard="false"  
            >
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="updateDashboardModalLabel">修改统计面板</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form id="update-dashboard-form">
                            <div class="modal-body">
                                <input type="hidden" name="id" id="id" />
                                <div class="mb-3">
                                    <label for="dashboard-name" class="form-label">名称</label>
                                    <input type="text" class="form-control" name="name" id="dashboard-name" />
                                </div>
                                <div class="mb-3">
                                    <label for="dashboard-description" class="form-label">描述</label>
                                    <textarea class="form-control" name="description" id="dashboard-description"></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn body-button" id="update-dashboard-button">保存</button>
                                <button type="button" class="btn body-button" data-bs-dismiss="modal">取消</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <script>
              const pathPrefix = "{{ pathPrefix }}";
            </script>
            <script src="/js/dashboards.js"></script>
        </body>
    </html>
{{ end }}
