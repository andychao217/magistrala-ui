<!-- Copyright (c) Abstract Machines
SPDX-License-Identifier: Apache-2.0 -->

{{ define "task" }}
  <!doctype html>
  <html lang="en">
    <head>
      <title>日程</title>
      {{ template "header" }}
    </head>
    <body>
      {{ template "navbar" . }}
      <div class="main-content pt-3">
        <div class="container-fluid">
          <div class="row-mb-3 p-3">
            <div class="col-lg-12 mx-auto">
              <div class="table-responsive table-container" id="taskPageContainer">
                <div class="taskContent">
                  <div class="taskContentHeaderBar">
                    <div>
                      <h5 style="display: flex;">
                        <div>
                          <span id="taskDateTitle"></span>
                        </div>
                        <div class="taskDateBadgeContainer">
                          <span class="badge bg-warning rounded-pill" id="taskDateBadge" style="font-size:10px; min-width: 30px">2</span>
                        </div>
                      </h5>
                    </div>
                    <div>
                      <div class="btn-group">
                        <button type="button" class="btn body-button" style="width: 90px;">新建日程</button>
                        <button type="button" class="btn body-button" style="width: 60px;">全部</button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="tackCalendar"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script>
        const protocol = window.location.protocol;
        const hostname = window.location.hostname;
        const userInfoStr = sessionStorage.getItem("userInfo");

        let comID = "";
        if (userInfoStr) {
          const userInfo = JSON.parse(userInfoStr);
          comID = userInfo.metadata.comID;
        }

        $(function() {
          $('.tackCalendar').pignoseCalendar({
            lang: 'ch',
            scheduleOptions: {
              colors: {
                offer: '#67c23a',
                ad: '#f56c6c'
              }
            },
            schedules: [{
              name: 'offer',
              date: '2024-07-01'
            }, {
              name: 'ad',
              date: '2024-07-03'
            }, {
              name: 'offer',
              date: '2024-07-05',
            }],
            select: function(dates, context) {
              $('#taskDateTitle').html(moment(dates[0]).format('YYYY-MM-DD'));
              // console.log('selected date', dates);
              // console.log('selected context', context);
              // console.log('events for this date', context.storage.schedules);
            }
          });
          $('#taskDateTitle').html(moment().format('YYYY-MM-DD'));
        });
      </script>
    </body>
  </html>
{{ end }}
